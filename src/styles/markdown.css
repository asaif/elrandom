/*!
 * Markdown Styles - Refactored to use component system
 * Project: https://github.com/sivan/heti
 * Source: https://unpkg.com/heti/umd/heti.min.css
 */

/* =============================================================================
   GLOBAL STYLES
   ============================================================================= */
.heti {
  --at-apply: 'break-words leading-normal hyphens-auto cjk:tracking-0.02em';
}

/* Customized Post Title */
.heti .post-title {
  --at-apply: 'mb-2 mt-0 text-8.6 font-bold lg:text-9';
}

/* =============================================================================
   HEADINGS - Using new component system
   ============================================================================= */
.heti :where(h1, h2, h3, h4, h5, h6) {
  --at-apply: 'content-heading';
}

.heti :where(h1) {
  --at-apply: 'content-heading-primary';
}

.heti :where(h2) {
  --at-apply: 'content-heading-secondary';
}

.heti :where(h3) {
  --at-apply: 'content-heading-tertiary';
}

.heti :where(h4) {
  --at-apply: 'text-4.5';
}

.heti :where(h5) {
  --at-apply: 'text-4';
}

.heti :where(h6) {
  --at-apply: 'font-normal';
}

.heti :where(h1, h2, h3) {
  --at-apply: 'text-balance leading-1.33em cjk:text-pretty cjk:tracking-0.05em';
}

.heti :where(h1 + h2, h2 + h3, h3 + h4, h4 + h5, h5 + h6) {
  --at-apply: 'mt-4';
}

/* =============================================================================
   PARAGRAPHS
   ============================================================================= */
.heti :where(p:not(.no-heti):not(.no-heti *)) {
  --at-apply: 'mb-4 text-pretty cjk:text-justify';
}

/* =============================================================================
   LINKS - Using new component system
   ============================================================================= */
.heti :where(a:not(.no-heti):not(.no-heti *)) {
  --at-apply: 'content-link';
}

/* =============================================================================
   IMAGES - Using new component system
   ============================================================================= */
.heti :where(img:not(.no-heti):not(.no-heti *)) {
  --at-apply: 'content-image';
}

.heti :where(img:not(figure img):not(.no-heti):not(.no-heti *)) {
  --at-apply: 'content-image-spacing';
}

.heti :where(figure) {
  --at-apply: 'content-figure';
}

.heti :where(figcaption) {
  --at-apply: 'content-caption';
}

.heti :is(h1, h2, h3, h4, h5, h6, img, figure) + :is(img, figure) {
  --at-apply: 'mt-4';
}

.heti :is(img, figure):has(+ :is(img, figure)) {
  --at-apply: 'mb-4';
}

/* =============================================================================
   CODE BLOCKS - Using new component system
   ============================================================================= */
.heti :where(pre) {
  --at-apply: 'code-block';
  scrollbar-width: thin;
  scrollbar-color: oklch(var(--un-preset-theme-colors-secondary) / 0) transparent;
  transition: scrollbar-color 0.3s ease-out;
}

.heti :where(pre):hover {
  scrollbar-color: oklch(var(--un-preset-theme-colors-secondary) / 0.15) transparent;
}

.heti pre code {
  --at-apply: 'border-none bg-transparent p-0';
}

html.dark .heti pre span {
  --at-apply: 'text-[var(--shiki-dark)]!';
}

.heti .code-block-wrapper {
  --at-apply: 'code-block-wrapper content-image-spacing';
}

.heti :is(h1, h2, h3, h4, h5, h6, .code-block-wrapper) + .code-block-wrapper {
  --at-apply: 'mt-4';
}

.heti .code-block-wrapper:has(+ .code-block-wrapper) {
  --at-apply: 'mb-4';
}

/* =============================================================================
   INLINE CODE - Using new component system
   ============================================================================= */
.heti :where(code) {
  --at-apply: 'code-inline cjk:break-all';
  counter-reset: line;
}

.heti code span.line {
  --at-apply: 'relative pl-8';
}

.heti code span.line::before {
  --at-apply: 'absolute left-0 w-4 secondary-text-subtle leading-1.9em';
  content: counter(line);
  counter-increment: line;
  direction: rtl;
}

/* =============================================================================
   BLOCKQUOTES
   ============================================================================= */
.heti :where(blockquote) {
  --at-apply: 'content-image-spacing border-l-4 secondary-border border-solid px-4 py-0.5 secondary-text-faded';
}

.heti blockquote[class*="admonition-"] {
  --at-apply: 'py-1.5 secondary-text';
}

.heti blockquote blockquote {
  --at-apply: 'py-0';
}

.heti blockquote > :first-child {
  --at-apply: 'mt-0';
}

.heti blockquote > :last-child {
  --at-apply: 'mb-0';
}

.heti :is(h1, h2, h3, h4, h5, h6, blockquote) + blockquote {
  --at-apply: 'mt-4';
}

.heti blockquote:has(+ blockquote) {
  --at-apply: 'mb-4';
}

/* =============================================================================
   TABLES
   ============================================================================= */
.heti :where(table) {
  --at-apply: 'content-image-spacing box-border block max-w-full table-fixed overflow-x-auto';
  scrollbar-width: thin;
  scrollbar-color: oklch(var(--un-preset-theme-colors-secondary) / 0) transparent;
  transition: scrollbar-color 0.3s ease-out;
}

.heti :where(table):hover {
  scrollbar-color: oklch(var(--un-preset-theme-colors-secondary) / 0.15) transparent;
}

.heti :where(thead) {
  --at-apply: 'bg-secondary/5';
}

.heti :where(th) {
  --at-apply: 'border border-secondary/25 border-solid px-3 py-2 font-semibold text-left';
}

.heti :where(td) {
  --at-apply: 'border border-secondary/25 border-solid px-3 py-2';
}

.heti :where(tbody tr):hover {
  --at-apply: 'bg-secondary/5';
}

.heti :is(h1, h2, h3, h4, h5, h6, table) + table {
  --at-apply: 'mt-4';
}

.heti table:has(+ table) {
  --at-apply: 'mb-4';
}

/* =============================================================================
   LISTS
   ============================================================================= */
.heti :where(ul, ol) {
  --at-apply: 'mb-4 pl-6';
}

.heti :where(li) {
  --at-apply: 'mb-1';
}

.heti :where(li > ul, li > ol) {
  --at-apply: 'mt-1 mb-0';
}

/* =============================================================================
   HORIZONTAL RULES
   ============================================================================= */
.heti :where(hr) {
  --at-apply: 'content-image-spacing border-0 h-px background-subtle';
}

.heti :is(h1, h2, h3, h4, h5, h6, hr) + hr {
  --at-apply: 'mt-4';
}

.heti hr:has(+ hr) {
  --at-apply: 'mb-4';
}
