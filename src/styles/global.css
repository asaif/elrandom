/* =============================================================================
   GLOBAL STYLES - Cleaned up version
   Removed duplications, moved reusable patterns to design-system.css
   ============================================================================= */

/* Base HTML styles */
html {
  --at-apply: 'bg-background c-secondary antialiased';
  scrollbar-width: thin;
  scrollbar-color: oklch(var(--un-preset-theme-colors-secondary) / 0.25) transparent;
  scrollbar-gutter: stable;
}

/* Fix Flash Issue On iOS */
body {
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

body::selection {
  --at-apply: 'bg-highlight';
}

/* =============================================================================
   HIGHLIGHT HOVER ANIMATION - Keep complex animation logic
   ============================================================================= */
.highlight-static,
.highlight-hover {
  --at-apply: 'relative inline-block';
}

.highlight-static::after,
.highlight-hover::after {
  --at-apply: 'absolute left-0 w-full highlight-bg';
  content: '';
  height: 0.50em;
  bottom: 0.7em;
  z-index: -1;
}

.highlight-static::after,
.highlight-hover:hover::after {
  --at-apply: 'origin-bottom-left scale-x-100';
}

.highlight-hover::after {
  --at-apply: 'origin-bottom-right scale-x-0 transition-transform ease-out lg:duration-300';
}

/* =============================================================================
   HEADING ANCHOR LINK - Keep specific implementation
   ============================================================================= */
.heading-anchor-link {
  --at-apply: 'inline-block translate-y-0.1em';
}

h1:hover .heading-anchor-link svg,
h2:hover .heading-anchor-link svg,
h3:hover .heading-anchor-link svg,
h4:hover .heading-anchor-link svg {
  --at-apply: 'op-40';
}

.heading-anchor-link svg {
  --at-apply: 'ml-0.4em aspect-square w-0.9em op-0 transition-opacity ease-out active:scale-90';
}

h1:hover .heading-anchor-link svg:hover,
h2:hover .heading-anchor-link svg:hover,
h3:hover .heading-anchor-link svg:hover,
h4:hover .heading-anchor-link svg:hover {
  --at-apply: 'op-80';
}

/* =============================================================================
   CODE COPY BUTTON - Updated to use new design system
   ============================================================================= */
.code-copy-button {
  /* Using new shortcut for consistency */
  --at-apply: 'code-copy-btn';
  /* Keep complex transition logic */
  transition: opacity 300ms ease-out, background-color 150ms ease-out;
}

.code-block-wrapper:hover .code-copy-button {
  --at-apply: 'op-100';
}

.code-copy-button.copy-success {
  --at-apply: 'border-none bg-emerald-600 c-background';
}

html.dark .code-copy-button.copy-success {
  --at-apply: 'bg-emerald-500';
}

.code-copy-button svg {
  --at-apply: 'mx-auto aspect-square w-50%';
}

.code-copy-button svg,
.code-copy-button svg path {
  --at-apply: 'pointer-events-none';
}
